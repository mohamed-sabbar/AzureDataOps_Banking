trigger:
  branches:
    include:
      - main

pool:
  vmImage: 'ubuntu-latest'

variables:
- group: variable group   # ton groupe de variables Azure DevOps

steps:
- task: UsePythonVersion@0
  inputs:
    versionSpec: '3.10'

- script: |
    pip install -r requirements.txt
    pip install databricks-cli
  displayName: 'Installer d√©pendances'

- script: |
    export DATABRICKS_HOST=https://adb-2212117686739670.10.azuredatabricks.net
    export DATABRICKS_TOKEN=$(DATABRICKS_TOKEN)
    
    databricks workspace import_dir notebooks /Workspace/Users/redaboukaich99@gmail.com --overwrite
    echo "‚úÖ Notebooks import√©s dans Databricks"
  displayName: 'D√©ployer notebooks Databricks'

- script: |
    databricks jobs run-now --job-id 89  # remplacer par ton ID_JOB r√©el
    echo "üöÄ Job Databricks ex√©cut√©"
  displayName: 'Ex√©cuter job Databricks'
